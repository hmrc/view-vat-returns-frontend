@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import models.obligations.VatReturns
@import views.html.templates.formatters.dates._

@(vatReturns: VatReturns)(implicit request: Request[_], messages: Messages, appConfig: config.AppConfig)

@views.html.main_template(title = messages("vatReturnsList.title"), bodyClasses = None, appConfig = appConfig) {

  <div class="grid-row">
    <div class="column-two-thirds">
      <h1 class="heading-xlarge">@messages("vatReturnsList.title")</h1>
      <p>@messages("vatReturnsList.submitReturns")</p>
      @if(vatReturns.obligations.isEmpty) {
        <h2 class="heading-medium">@messages("vatReturnsList.noReturns")</h2>
      } else {
        <table id="vatReturnsList" class="form-group">
          <caption class="visually-hidden">@messages("vatReturnsList.tableCaption")</caption>
          <thead>
            <tr>
              <th>@messages("vatReturnsList.periodEnding")</th>
              <th>@messages("vatReturnsList.status")</th>
              <th>@messages("vatReturnsList.returnDetails")</th>
            </tr>
          </thead>
          <tbody>
            @vatReturns.obligations.collect {
              case obligation if obligation.status == "O" => {
                <tr>
                  <td>@displayDate(obligation.end)</td>
                  <td>@messages("vatReturnsList.due") @displayDate(obligation.due)</td>
                  <td>@messages("vatReturnsList.notSubmitted")</td>
                </tr>
              }
            }
            @vatReturns.obligations.collect {
              case obligation if obligation.status == "F" => {
                <tr>
                  <td>@displayDate(obligation.end)</td>
                  <td>@messages("vatReturnsList.received")</td>
                  <td>
                    <a href="@controllers.routes.ReturnsController.vatReturnDetails()">
                      @messages("vatReturnsList.viewReturnOne") @displayDate(obligation.end) @messages("vatReturnsList.viewReturnTwo")
                    </a>
                  </td>
                </tr>
              }
            }
          </tbody>
        </table>
      }

      <p>@messages("vatReturnsList.viewEarlierReturnsOne")
        <a href="@appConfig.portalUrl">@messages("vatReturnsList.viewEarlierReturnsTwo")</a>
        @messages("vatReturnsList.viewEarlierReturnsThree")
      </p>

    </div>
  </div>
}